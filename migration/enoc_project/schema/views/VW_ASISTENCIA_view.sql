-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = enoc,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_asistencia (id_asistencia, id_trabajador, fecha, id_anho, id_mes, id_dia, nro_dia, hora_base_ent, hora_base_sal, hora_base_ent_ref, hora_base_sal_ref, num_horas_base, num_refrigerio, hora_entrada, hora_salida, hora_entrada_ref, hora_salida_ref, num_horas, num_tole_tar, num_minutos_tar_ent, num_tole_tar_ref, num_minutos_tar_ref, num_minutos_tar_sal, num_minutos_tar_sal_ref, num_minutos_tar, hora_entrada_real, hora_salida_real, hora_entrada_ref_real, hora_salida_ref_real, num_horas_real, id_mapa_poligono, id_situacion_especial, id_tipo_control_personal, id_tipo_tiempo_trabajo, id_tipo_horario, id_condicion_laboral, id_sedearea, id_perfil_puesto, id_userdevice, id_horario_mensual_det, sal_diasig, perm_hora, id_user_reg, fecha_reg, id_user_mod, fecha_mod, id_motivo_asist, id_entidad, id_depto_padre, id_area, area, entidad, depto_padre, id_depto, id_sede, ccosto, id_persona, id_entidad_t, id_tipo_contrato, id_sedearea_t, id_tipo_tiempo_trabajo_t, id_grupo_planilla, id_tipo_horario_t, id_contrato, id_perfil_puesto_t, id_situacion_especial_t, id_entidad_th, id_depto_th, tipo_horario, id_tipo_config_horario, codigo, control_culto) AS SELECT
A.ID_ASISTENCIA,
A.ID_TRABAJADOR,
A.FECHA,
A.ID_ANHO,
A.ID_MES,
A.ID_DIA,
A.NRO_DIA,
A.HORA_BASE_ENT,
A.HORA_BASE_SAL,
A.HORA_BASE_ENT_REF,
A.HORA_BASE_SAL_REF,
A.NUM_HORAS_BASE,
A.NUM_REFRIGERIO,
A.HORA_ENTRADA,
A.HORA_SALIDA,
A.HORA_ENTRADA_REF,
A.HORA_SALIDA_REF,
A.NUM_HORAS,
A.NUM_TOLE_TAR,
A.NUM_MINUTOS_TAR_ENT,
A.NUM_TOLE_TAR_REF,
A.NUM_MINUTOS_TAR_REF,
A.NUM_MINUTOS_TAR_SAL,
A.NUM_MINUTOS_TAR_SAL_REF,
A.NUM_MINUTOS_TAR,
A.HORA_ENTRADA_REAL,
A.HORA_SALIDA_REAL,
A.HORA_ENTRADA_REF_REAL,
A.HORA_SALIDA_REF_REAL,
A.NUM_HORAS_REAL,
A.ID_MAPA_POLIGONO,
A.ID_SITUACION_ESPECIAL,
A.ID_TIPO_CONTROL_PERSONAL,
A.ID_TIPO_TIEMPO_TRABAJO,
A.ID_TIPO_HORARIO,
A.ID_CONDICION_LABORAL,
A.ID_SEDEAREA,
A.ID_PERFIL_PUESTO,
A.ID_USERDEVICE,
A.ID_HORARIO_MENSUAL_DET,
A.SAL_DIASIG,
A.PERM_HORA,
A.ID_USER_REG,
A.FECHA_REG,
A.ID_USER_MOD,
A.FECHA_MOD,
A.ID_MOTIVO_ASIST,
B.ID_ENTIDAD,
B.ID_DEPTO_PADRE,
B.ID_AREA,
B.AREA,
B.ENTIDAD,
B.DEPTO_PADRE,
B.ID_DEPTO,
B.ID_SEDE,
B.CCOSTO,
T.ID_PERSONA,
T.ID_ENTIDAD AS ID_ENTIDAD_T,
T.ID_TIPO_CONTRATO,
T.ID_SEDEAREA AS ID_SEDEAREA_T,
T.ID_TIPO_TIEMPO_TRABAJO AS ID_TIPO_TIEMPO_TRABAJO_T,
T.ID_GRUPO_PLANILLA,
T.ID_TIPO_HORARIO AS ID_TIPO_HORARIO_T,
T.ID_CONTRATO,
T.ID_PERFIL_PUESTO AS ID_PERFIL_PUESTO_T,
T.ID_SITUACION_ESPECIAL AS ID_SITUACION_ESPECIAL_T,
TH.ID_ENTIDAD  AS ID_ENTIDAD_TH,
TH.ID_DEPTO AS ID_DEPTO_TH,
TH.NOMBRE AS TIPO_HORARIO,
TH.ID_TIPO_CONFIG_HORARIO,
TH.CODIGO,
TH.CONTROL_CULTO
FROM ENOC.PLLA_ASISTENCIA A,MOISES.TRABAJADOR T, ENOC.VW_ENT_DEP_AREA_CCOSTO B,ENOC.PLLA_TIPO_HORARIO TH
WHERE A.ID_TRABAJADOR=T.ID_TRABAJADOR
AND A.ID_SEDEAREA = B.ID_SEDEAREA
AND A.ID_TIPO_HORARIO= TH.ID_TIPO_HORARIO;

