-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = enoc,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_adicional_pago (id_adicional, id_entidad, id_depto, id_concepto_adicional, id_estado_adicional, id_trabajador, id_concepto_planilla, descripcion, id_anho, id_mes, acuerdo_fac, adjunto, convenio, convenio_firma, finalizado, id_sedearea, importe, variacion, id_adicional_det, id_adicional_persona, grupal, vigencia) AS SELECT
A.ID_ADICIONAL,
A.ID_ENTIDAD,
A.ID_DEPTO,
A.ID_CONCEPTO_ADICIONAL,
A.ID_ESTADO_ADICIONAL,
A.ID_TRABAJADOR,
A.ID_CONCEPTO_PLANILLA,
A.DESCRIPCION,
B.ID_ANHO,
B.ID_MES,
A.ACUERDO_FAC,
A.ADJUNTO,
A.CONVENIO,
A.CONVENIO_FIRMA,
A.FINALIZADO,
B.ID_SEDEAREA,
B.IMPORTE,
B.VARIACION,
B.ID_ADICIONAL_DET,
NULL AS ID_ADICIONAL_PERSONA,
0 AS GRUPAL,
B.VIGENCIA
FROM ENOC.PLLA_ADICIONAL A,ENOC.PLLA_ADICIONAL_DET B
WHERE A.ID_ADICIONAL=B.ID_ADICIONAL

UNION ALL

SELECT
A.ID_ADICIONAL,
A.ID_ENTIDAD,
A.ID_DEPTO,
A.ID_CONCEPTO_ADICIONAL,
A.ID_ESTADO_ADICIONAL,
B.ID_TRABAJADOR,
A.ID_CONCEPTO_PLANILLA,
A.DESCRIPCION,
A.ID_ANHO,
A.ID_MES,
A.ACUERDO_FAC,
A.ADJUNTO,
A.CONVENIO,
A.CONVENIO_FIRMA,
A.FINALIZADO,
B.ID_SEDEAREA,
B.IMPORTE,
B.VARIACION,
NULL AS ID_ADICIONAL_DET,
B.ID_ADICIONAL_PERSONA,
1 AS GRUPAL,
B.VIGENCIA
FROM ENOC.PLLA_ADICIONAL A,ENOC.PLLA_ADICIONAL_PERSONA B
WHERE A.ID_ADICIONAL=B.ID_ADICIONAL;

