-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = enoc,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_periodo_vac_trab (id_periodo_vac_trab, id_periodo_vac, id_trabajador, periodo_ini, periodo_fin, periodo_ini_trab, periodo_fin_trab, total_dias, total_dias_efect, id_estado_vac_trab, comentario, id_user_apru, fecha_apru, dias_anho, id_entidad, nombre, min_dias_periodo1, min_dias_periodo2, id_estado_periodo_vac, anho_inicio, comentario_cambio, confirmado) AS SELECT
A.ID_PERIODO_VAC_TRAB,
A.ID_PERIODO_VAC,
A.ID_TRABAJADOR,
A.PERIODO_INI,
A.PERIODO_FIN,
ADD_MONTHS(A.PERIODO_INI,-12) AS PERIODO_INI_TRAB,
ADD_MONTHS(A.PERIODO_FIN,-12) AS PERIODO_FIN_TRAB,
A.TOTAL_DIAS,
A.TOTAL_DIAS_EFECT,
A.ID_ESTADO_VAC_TRAB,
A.COMENTARIO,
A.ID_USER_APRU,
A.FECHA_APRU,
A.DIAS_ANHO,
B.ID_ENTIDAD,
B.NOMBRE,
B.MIN_DIAS_PERIODO1,
B.MIN_DIAS_PERIODO2,
B.ID_ESTADO_PERIODO_VAC,
B.ANHO_INICIO,
A.COMENTARIO_CAMBIO,
A.CONFIRMADO
FROM ENOC.PLLA_PERIODO_VAC_TRAB A, ENOC.PLLA_PERIODO_VAC B
WHERE A.ID_PERIODO_VAC=B.ID_PERIODO_VAC;

