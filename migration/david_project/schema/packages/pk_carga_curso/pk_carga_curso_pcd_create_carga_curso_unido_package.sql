-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = david,pk_carga_curso,public;




CREATE OR REPLACE PROCEDURE david.pk_carga_curso_pcd_create_carga_curso_unido (p_id_carga_curso integer, p_id_plan_curso integer, p_id_semestre_programa integer, p_id_usuario_reg integer, out CURSOR REFCURSOR) AS $body$
DECLARE


      v_id_programa_estudio Acad_Carga_Curso_Det.id_programa_estudio%type;
      l_contar bigint:=0;
      l_error varchar(200);

BEGIN 
        l_error:= '';

        select id_programa_estudio into STRICT v_id_programa_estudio
        from acad_semestre_programa where id_semestre_programa=p_id_semestre_programa;

        insert into acad_carga_curso_det(id_plan_curso,id_carga_curso,origen,id_programa_estudio,id_usuario_reg,fecha_registro)
        values (p_id_plan_curso,p_id_carga_curso,'E',v_id_programa_estudio,p_id_usuario_reg,clock_timestamp());
         l_contar :=1;

        open CURSOR FOR 
            SELECT l_contar as resultado, l_error as msg_error;

   END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE david.pk_carga_curso_pcd_create_carga_curso_unido (p_id_carga_curso integer, p_id_plan_curso integer, p_id_semestre_programa integer, p_id_usuario_reg integer, out CURSOR REFCURSOR) FROM PUBLIC;
