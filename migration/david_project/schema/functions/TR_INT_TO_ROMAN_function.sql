-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION david.tr_int_to_roman (P_NUMBER bigint) RETURNS varchar AS $body$
DECLARE

    V_ROMAN            varchar(100);
    V_NUMBERS CONSTANT DBMS_DEBUG_VC2COLL := DBMS_DEBUG_VC2COLL('M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X',
                                                                        'IX', 'V', 'IV', 'I');
    V_VALUES CONSTANT  DBMS_DEBUG_VC2COLL := DBMS_DEBUG_VC2COLL(1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5,
                                                                        4, 1);
    V_VALUE            bigint                 := P_NUMBER;

BEGIN
    V_ROMAN := '';
    FOR i IN 1 .. V_NUMBERS.COUNT
        LOOP
            WHILE V_VALUE >= V_VALUES(i)
                LOOP
                    V_ROMAN := V_ROMAN || V_NUMBERS(i);
                    V_VALUE := V_VALUE - V_VALUES(i);
                END LOOP;
        END LOOP;
    RETURN V_ROMAN;

EXCEPTION
    WHEN no_data_found
        THEN
            RAISE NOTICE '%', SQLERRM;
            RETURN NULL;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION david.tr_int_to_roman (P_NUMBER bigint) FROM PUBLIC;

