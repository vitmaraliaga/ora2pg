-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION david.ft_concatenado_responsable_fin ( V_ID_PERSONA bigint ) RETURNS varchar AS $body$
DECLARE


p_res varchar(4000);


BEGIN

  select Resp_Financiero||' - Celular: '||coalesce(Celular_Resp,'Sin Celular')||' - Correo: '||coalesce(Correo_Resp,'Sin Correo') into STRICT p_res
  from (
  SELECT id_semestre,Id_Resp_Financiero,Resp_Financiero,Celular_Resp,Correo_Resp from vw_acad_alumno_contrato where id_persona=V_ID_PERSONA and estado='1'
  order by id_semestre desc) alias2 LIMIT 1;

  return p_res;

end;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION david.ft_concatenado_responsable_fin ( V_ID_PERSONA bigint ) FROM PUBLIC;

