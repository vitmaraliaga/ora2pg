-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION david.fc_meridian_converter ( P_TIME text, P_SHIFT_CODE text) RETURNS varchar AS $body$
DECLARE

    R_MERIDIAN varchar(5) := '';

BEGIN
    IF (P_TIME IS NOT NULL AND P_TIME::text <> '') AND (P_SHIFT_CODE IS NOT NULL AND P_SHIFT_CODE::text <> '')
    THEN

        SELECT (CASE
                    WHEN P_SHIFT_CODE = 'M' AND (SUBSTR(P_TIME, 0, 2))::numeric  > 2
                        THEN P_TIME
                    ELSE (CASE
                              WHEN (SUBSTR(P_TIME, 0, 2))::numeric  >= 12
                                  THEN P_TIME
                              ELSE TO_CHAR(to_date((SUBSTR(P_TIME, 0, 2))::numeric  + 12 || SUBSTR(P_TIME, -3),'hh24:mi'), 'hh24:mi')
                        END)
            END)
        INTO STRICT R_MERIDIAN
;

    END IF;

    RETURN R_MERIDIAN;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION david.fc_meridian_converter ( P_TIME text, P_SHIFT_CODE text) FROM PUBLIC;

