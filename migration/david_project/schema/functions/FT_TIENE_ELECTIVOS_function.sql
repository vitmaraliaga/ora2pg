-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION david.ft_tiene_electivos ( p_id_plan_curso bigint, p_id_plan bigint ) RETURNS bigint AS $body$
DECLARE

    r_numero bigint;


BEGIN

	SELECT count(1) AS contador INTO STRICT r_numero 
	FROM VW_ACAD_CURSO_PLAN vacp 
		WHERE ID_PLAN = p_id_plan AND ID_PLAN_CURSO = p_id_plan_curso AND  ID_PLAN_CURSO IN (
		SELECT ID_PLAN_CURSO_ELECTIVO 
		FROM VW_ACAD_CURSO_PLAN vacp2  
		WHERE id_plan= p_id_plan AND (ID_PLAN_CURSO_ELECTIVO IS NOT NULL AND ID_PLAN_CURSO_ELECTIVO::text <> '') 
	);

    RETURN r_numero;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION david.ft_tiene_electivos ( p_id_plan_curso bigint, p_id_plan bigint ) FROM PUBLIC;

