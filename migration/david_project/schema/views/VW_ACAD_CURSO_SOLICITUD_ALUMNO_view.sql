-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_acad_curso_solicitud_alumno (id_plan_curso, id_persona, id_solicitud_mat_alum, id_solicitud_curso_matricula, id_tipo_solicitud_matricula, id_carga_curso, nombre_curso, nombre_docente, credito, ht, hp, hnp, id_facultad, nombre_facultad, id_escuela, nombre_escuela, ciclo, grupo, nombre_docente_practica, nombre_practica, codigo_practica, id_carga_curso_docente, semestre, id_semestre, id_plan_programa, id_semestre_programa, estado, sede) AS select
aca.id_plan_curso, sma.id_persona, sma.id_solicitud_mat_alum, aca.id_solicitud_curso_matricula, sma.id_tipo_solicitud_matricula, acc.id_carga_curso,ac.nombre nombre_curso,ft_profesor_teoria(aca.Id_Carga_Curso) nombre_docente, 
acd.credito, acd.ht, acd.hp, acd.hnp, Vape.Id_Facultad, Vape.Nombre_Facultad, Vape.Id_Escuela, Vape.Nombre_Escuela,
coalesce(apc.Ciclo,ft_ciclo_curso_persona(sma.id_persona,apc.id_curso_detalle)) ciclo , acc.grupo,

trim(both p.Paterno||' '||p.Materno||' '||p.Nombre) nombre_docente_practica, 
Th.Nombre nombre_practica, Th.Codigo codigo_practica, accd.Id_Carga_Curso_Docente,
asm.semestre, asm.id_semestre, aca.Id_Plan_Programa, asp.ID_SEMESTRE_PROGRAMA, aca.estado, vape.sede
FROM solicitud_curso_matricula aca 
inner join solicitud_mat_alum sma on sma.id_solicitud_mat_alum=aca.id_solicitud_mat_alum
inner join acad_carga_curso acc on acc.id_carga_curso=aca.id_carga_curso
left join Acad_Carga_Curso_Docente accd on accd.Id_Carga_Curso_Docente=aca.Id_Horario_Practica
left join Acad_Plan_Programa app on App.Id_Plan_Programa=aca.Id_Plan_Programa 

left join Acad_Plan_Curso apc on  apc.id_plan_curso=aca.id_plan_curso
inner join acad_curso_detalle acd on acd.id_curso_detalle=apc.id_curso_detalle
inner join acad_curso ac on ac.id_curso=acd.id_curso
left join tipo_horario th on th.Id_Tipo_Horario=accd.Id_Tipo_Horario
left join moises.persona p on p.id_persona=accd.Id_persona
inner join acad_semestre_programa asp on Asp.Id_Semestre_Programa=Acc.Id_Semestre_Programa
inner join acad_semestre asm on asm.id_semestre=asp.id_semestre
inner join vw_acad_programa_estudio vape on Vape.Id_Programa_Estudio=Asp.Id_Programa_Estudio;

