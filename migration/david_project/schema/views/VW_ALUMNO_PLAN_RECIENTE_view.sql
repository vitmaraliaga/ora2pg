-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_alumno_plan_reciente (id_alumno_plan, id_persona, estado, id_plan_programa, id_plan, nombre_plan, id_sede, sede, id_escuela, escuela, nom_escuela, nombre_escuela, escuela_profesional, id_facultad, nom_facultad, id_programa_estudio, id_tipo_contrato, id_nivel_ensenanza, id_sedearea, graduado, contrato, fecha_registro) AS SELECT vapp.ID_ALUMNO_PLAN,vapp.ID_PERSONA,vapp.ESTADO,vapp.ID_PLAN_PROGRAMA,vapp.ID_PLAN,vapp.NOMBRE_PLAN,vapp.ID_SEDE,vapp.SEDE,vapp.ID_ESCUELA,vapp.ESCUELA,vapp.NOM_ESCUELA,vapp.NOMBRE_ESCUELA,vapp.ESCUELA_PROFESIONAL,vapp.ID_FACULTAD,vapp.NOM_FACULTAD,vapp.ID_PROGRAMA_ESTUDIO,vapp.ID_TIPO_CONTRATO,vapp.ID_NIVEL_ENSENANZA,vapp.ID_SEDEAREA,vapp.GRADUADO,vapp.CONTRATO,vapp.FECHA_REGISTRO FROM

david.VW_ALUMNO_PLAN_PROGRAMA vapp

WHERE vapp.id_alumno_plan IN ( 
SELECT ID_ALUMNO_PLAN FROM ( 
SELECT max(ID_ALUMNO_PLAN) ID_ALUMNO_PLAN ,ID_PERSONA  
FROM david.vw_Alumno_plan_programa vpp

WHERE ESTADO ='1' AND vpp.id_nivel_ensenanza=1

GROUP BY id_persona) alias1 
);

