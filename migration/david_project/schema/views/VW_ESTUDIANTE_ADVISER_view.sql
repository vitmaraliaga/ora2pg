-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_estudiante_adviser (nombre_semestre, id_semestre, adviser, adviser_celular, adviser_correo, codigo, estudiante, estudiante_celular, estudiante_correo, sede, nom_escuela, nom_facultad, id_sede, id_unidad_academica, id_programa_estudio, id_nivel_ensenanza, id_tipo_contrato, nivel_ensenanza, tipo_contrato, id_adviser, id_persona, semestre, estado, id_adviser_tutorando) AS SELECT as2.NOMBRE AS nombre_semestre ,
as2.id_semestre,
pe1.NOMBRE  || ' ' ||pe1.PATERNO  ||' ' || pe1.MATERNO  AS adviser ,
pen1.celular AS adviser_celular,
pen1.correo_inst AS adviser_correo,
pna.CODIGO ,
pe2.NOMBRE  || ' ' ||pe2.PATERNO  ||' ' || pe2.MATERNO  AS estudiante ,
pen2.celular AS estudiante_celular,
pen2.correo_inst AS estudiante_correo,
vpp.SEDE,
vpp.NOM_ESCUELA,
vpp.nom_facultad,
vape.id_Sede,
vape.id_unidad_academica,
vape.id_programa_estudio,
vape.id_nivel_ensenanza,
vape.id_tipo_contrato,
tne.nombre AS nivel_ensenanza,
tc.nombre AS tipo_contrato,
at2.id_adviser,
pe2.id_persona,
as2.semestre AS semestre,
at2.estado,
at2.id_adviser_tutorando

FROM ADVISER_TUTORANDO at2 
INNER JOIN ACAD_SEMESTRE as2 ON at2.ID_SEMESTRE =as2.ID_SEMESTRE 
INNER JOIN moises.persona pe1 ON pe1.ID_PERSONA = at2.ID_ADVISER 
INNER JOIN moises.persona_natural pen1 ON pe1.ID_PERSONA = pen1.ID_PERSONA 
INNER JOIN moises.persona pe2 ON pe2.ID_PERSONA = at2.ID_PERSONA 
INNER JOIN moises.persona_natural pen2 ON pe2.ID_PERSONA = pen2.ID_PERSONA 
INNER JOIN moises.PERSONA_NATURAL_ALUMNO pna ON pna.ID_PERSONA =pe2.ID_PERSONA 
INNER JOIN VW_PLAN_PROGRAMA vpp ON vpp.ID_PLAN_PROGRAMA =at2.ID_PLAN_PROGRAMA 
INNER JOIN VW_ACAD_PROGRAMA_ESTUDIO vape ON vape.ID_PROGRAMA_ESTUDIO =vpp.ID_PROGRAMA_ESTUDIO 
INNER JOIN TIPO_NIVEL_ENSENANZA tne ON tne.ID_NIVEL_ENSENANZA =vape.ID_NIVEL_ENSENANZA 
INNER JOIN TIPO_CONTRATO tc ON tc.ID_TIPO_CONTRATO =vape.ID_TIPO_CONTRATO;

