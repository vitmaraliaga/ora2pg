-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_acuerdo_contrato_curso (nombre_escuela, estudiante, id_alumno_contrato, codigo, estado_contrato, id_acuerdo_contrato, estado_acuerdo, nombre, id_curso_alumno, ciclo, hp, hnp, ht, credito, grupo, id_acuerdo_contrato_curso) AS SELECT VP.NOMBRE || ' ' || VP.SEDE AS NOMBRE_ESCUELA,
P.NOMBRE || ' ' || P.PATERNO || ' ' || P.MATERNO AS ESTUDIANTE,
AC.ID_ALUMNO_CONTRATO,
AC.CODIGO,
AC.ESTADO AS ESTADO_CONTRATO,
C.ID_ACUERDO_CONTRATO,
C.ESTADO AS ESTADO_ACUERDO
,CU.NOMBRE,ACA.id_curso_alumno
,PC.CICLO, ACD.HP, ACD.HNP, ACD.HT, ACD.CREDITO,
CG.GRUPO,
CC.ID_ACUERDO_CONTRATO_CURSO
FROM ACUERDO_CONTRATO C JOIN ACAD_ALUMNO_CONTRATO AC ON C.ID_ALUMNO_CONTRATO=AC.ID_ALUMNO_CONTRATO
JOIN  ACUERDO_CONTRATO_CURSO CC ON CC.ID_ACUERDO_CONTRATO=C.ID_ACUERDO_CONTRATO
JOIN ACAD_ALUMNO_CONTRATO_CURSO CCU ON CCU.ID_ALUMNO_CONTRATO_CURSO=CC.ID_ALUMNO_CONTRATO_CURSO
JOIN MOISES.PERSONA P ON P.ID_PERSONA=AC.ID_PERSONA
JOIN ACAD_PLAN_PROGRAMA PP ON PP.ID_PLAN_PROGRAMA=AC.ID_PLAN_PROGRAMA
JOIN VW_ACAD_PROGRAMA_ESTUDIO VP ON VP.ID_PROGRAMA_ESTUDIO=PP.ID_PROGRAMA_ESTUDIO
JOIN ACAD_CURSO_ALUMNO ACA ON ACA.ID_CURSO_ALUMNO = CCU.ID_CURSO_ALUMNO AND ACA.ID_PERSONA=AC.ID_PERSONA
INNER JOIN ACAD_CARGA_CURSO CG ON CG.ID_CARGA_CURSO=ACA.ID_CARGA_CURSO
INNER JOIN ACAD_CARGA_CURSO_DET CCD ON CCD.ID_CARGA_CURSO=CG.ID_CARGA_CURSO
INNER JOIN ACAD_PLAN_CURSO PC ON PC.ID_PLAN_CURSO=CCD.ID_PLAN_CURSO
INNER JOIN ACAD_CURSO_DETALLE ACD ON  ACD.ID_CURSO_DETALLE=PC.ID_CURSO_DETALLE
INNER JOIN ACAD_CURSO CU ON ACD.ID_CURSO=CU.ID_CURSO;

