-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_acad_carga_academica (id_facultad, nom_facultad, id_escuela, nom_escuela, nombre_corto, id_semestre, semestre, id_carga_curso_det, id_carga_curso, id_plan_curso, id_curso_detalle, nombre_curso, ciclo, credito, ht, hp, hnp, ct, cp, nota_aprobatoria, estado_curso, estado_carga_curso, grupo, cupo, cupos_extras, origen, modo, id_curso_modo, id_tipo_curso, factor, horas_lectivas, id_formato_silabo, id_plan_curso_electivo, id_plan, id_plan_programa, id_programa_estudio, id_sede, id_sedearea, id_modalidad_estudio, id_semipresencial, id_sede_sem, id_tipo_contrato, id_nivel_ensenanza, id_unidad_academica, id_semestre_programa, descuento_credito, codigo, tutoria, disponible, acuerdo, puede_editar_silabo, puede_editar_silabo_total, id_tipo_ev, cerrado, nombre_tipo_ev, id_modo_evaluacion, modo_evaluacion) AS select Vacp.Id_Parent                                          id_facultad,
       Vacp.Nombre_Area_Padre                                  Nom_Facultad,
       Vacp.Id_Area                                            id_escuela,
       Vape.Nombre_Escuela                                     nom_escuela,
       vape.nombre_corto,
       Asm.id_Semestre,
       Asm.Semestre,
       accd.Id_Carga_Curso_Det,
       accd.Id_Carga_Curso,
       accd.Id_Plan_Curso,
       Vacp.id_curso_detalle,
       decode(Vacpe.curso, null, '', Vacpe.curso || ' - ') || vacp.curso ||
       decode(tev.Nombre, null, '', ' (' || tev.nombre || ')') nombre_curso,
       vacp.ciclo,
       vacp.credito,
       vacp.ht,
       vacp.hp,
       vacp.hnp,
       vacp.ct,
       vacp.cp,
       vacp.Nota_Aprobatoria,
       vacp.Estado_Curso,
       acc.Estado_Curso                                        estado_carga_curso,
       acc.grupo,
       acc.cupo,
       acc.cupos_extras,
       accd.Origen,
       acm.nombre modo,
       acc.Id_Curso_Modo,
       vacp.Id_Tipo_Curso,
       acc.Factor,
       acc.Horas_Lectivas,
       acc.Id_Formato_Silabo,
       vacp.Id_Plan_Curso_Electivo,
       vacp.id_plan,
       app.Id_Plan_Programa,
       vape.Id_Programa_Estudio,
       vape.id_sede,
       vape.id_sedearea,
       vape.Id_Modalidad_Estudio,
       vape.Id_Semipresencial,
       vape.id_sede_sem,
       vape.Id_Tipo_Contrato,
       vape.Id_Nivel_Ensenanza,
       Vape.Id_Unidad_Academica,
       asp.Id_Semestre_Programa,
       acc.descuento_credito,
       acc.Codigo,
       acc.tutoria,
       acc.Disponible,
       acc.acuerdo,
       acc.puede_editar_silabo,
       acc.puede_editar_silabo_total,
       acc.Id_Tipo_Ev,
       acc.cerrado,
       tev.Nombre                                              nombre_tipo_ev,
       tme.ID_MODO_EVALUACION,
       tme.nombre                                              modo_evaluacion
FROM Acad_Carga_Curso_Det accd
         inner join acad_carga_curso acc on acc.Id_Carga_Curso = accd.Id_Carga_Curso
         inner join Vw_Acad_Curso_Plan vacp on Vacp.Id_Plan_Curso = accd.Id_Plan_Curso
         inner join Acad_Semestre_Programa asp on asp.Id_Semestre_Programa = acc.Id_Semestre_Programa
         inner join acad_semestre asm on Asm.Id_Semestre = asp.Id_Semestre
         inner join Acad_Curso_Modo acm on acm.id_curso_modo=acc.Id_Curso_Modo
         inner join vw_acad_programa_estudio vape on vApe.Id_Programa_Estudio = accd.Id_Programa_Estudio
         inner join acad_plan_programa app
                    on app.Id_Plan = Vacp.Id_Plan and app.Id_Programa_Estudio = accd.Id_Programa_Estudio
         left join acad_tipo_ev tev on tev.Id_Tipo_Ev = acc.Id_Tipo_Ev
         left join Vw_Acad_Curso_Plan vacpe on Vacpe.Id_Plan_Curso = Vacp.Id_Plan_Curso_Electivo
        LEFT JOIN TIPO_MODO_EVALUACION tme ON acc.ID_MODO_EVALUACION = tme.ID_MODO_EVALUACION;

