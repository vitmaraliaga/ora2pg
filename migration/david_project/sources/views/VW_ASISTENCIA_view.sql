-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_asistencia (id_asistencia, id_asistencia_det, fecha_clase, id_carga_curso, id_carga_curso_docente, docente, id_sede, nom_facultad, nom_escuela, codigo, estudiante, id_persona, nombre_curso, grupo) AS SELECT 
aad.id_Asistencia,
aad.ID_ASISTENCIA_DET ,
aa.fecha_clase,
accd.id_carga_curso,
accd.id_carga_curso_docente,
pe.PATERNO ||' ' || pe.MATERNO || ' ' || pe.NOMBRE AS docente ,
 
vaca.ID_SEDE ,
vaca.NOM_FACULTAD ,
vaca.NOM_ESCUELA ,
pna.codigo,
pe2.PATERNO ||' ' || pe2.MATERNO || ' ' || pe2.NOMBRE AS estudiante,
pe2.ID_PERSONA ,
vaca.NOMBRE_CURSO , vaca.GRUPO  FROM ACAD_ASISTENCIA_DET aad 
INNER JOIN ACAD_ASISTENCIA aa ON aa.ID_ASISTENCIA =aad.ID_ASISTENCIA 
INNER JOIN ACAD_CARGA_CURSO_DOCENTE accd ON accd.ID_CARGA_CURSO_DOCENTE = aa.ID_CARGA_CURSO_DOCENTE 
INNER JOIN david.VW_ACAD_CARGA_ACADEMICA vaca ON vaca.ID_CARGA_CURSO =accd.ID_CARGA_CURSO  AND vaca.ORIGEN ='O'
INNER JOIN moises.persona pe ON pe.ID_PERSONA =accd.ID_PERSONA 
INNER JOIN moises.persona pe2 ON pe2.ID_PERSONA =aad.ID_PERSONA 
INNER JOIN moises.PERSONA_NATURAL_ALUMNO pna ON pna.ID_PERSONA = pe2.ID_PERSONA ;

