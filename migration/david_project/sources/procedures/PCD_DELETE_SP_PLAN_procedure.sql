-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

procedure pcd_delete_sp_plan(p_id_plan integer)
 is
begin
  delete ACAD_PRE_REQUISITO where Id_Pre_Requisito in (
  select Pr.Id_Pre_Requisito
  from Acad_Pre_Requisito pr inner join Acad_Plan_Curso apc on Apc.Id_Plan_Curso=Pr.Id_Plan_Curso
  where Apc.Id_Plan=p_id_plan);
  
  
  delete acad_plan_curso 
  where id_plan_curso in (
  select pc.id_plan_curso
  from acad_plan_curso pc 
  where pc.Id_Plan=p_id_plan and pc.Id_Plan_Curso_Electivo is not null);
  
  
  delete acad_plan_curso where id_plan_curso in (
  select pc.id_plan_curso
  from acad_plan_curso pc 
  where pc.Id_Plan=p_id_plan and pc.Id_Plan_Curso_Electivo is null);
  
  commit;
  
end;

