-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

procedure       pcd_create_equiv_curs is
begin 
  insert into ACAD_CURSO_EQUIVALENCIA(ID_CURSO_DETALLE,ESTADO,ID_USUARIO_REG,FECHA_REGISTRO)
  select ID_CURSO_DETALLE,1 ESTADO,23 ID_USUARIO_REG,sysdate FECHA_REGISTRO 
  from ACAD_CURSO_detalle b 
  where not Exists (select 1 from ACAD_CURSO_EQUIVALENCIA c where c.ID_CURSO_DETALLE=b.ID_CURSO_DETALLE);
  commit;
  
  
  insert into ACAD_EQUIVALENCIA_DETALLE (ID_CURSO_EQUIVALENCIA,ID_CURSO_DETALLE,ESTADO,ID_USUARIO_REG,FECHA_REGISTRO) 
  select b.ID_CURSO_EQUIVALENCIA,a.ID_CURSO_DETALLE,1 ESTADO,23 ID_USUARIO_REG,sysdate FECHA_REGISTRO 
  from ACAD_CURSO_detalle a inner join ACAD_CURSO_EQUIVALENCIA b on b.Id_Curso_Detalle=a.Id_Curso_Detalle
  where not Exists (select 1 from ACAD_EQUIVALENCIA_DETALLE c 
                      where c.ID_CURSO_DETALLE=a.ID_CURSO_DETALLE
                      and c.ID_CURSO_EQUIVALENCIA=b.ID_CURSO_EQUIVALENCIA);
  commit;
end;

