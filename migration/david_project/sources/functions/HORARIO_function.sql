-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

FUNCTION HORARIO(HORARIO VARCHAR2,NUM_DIA VARCHAR2)
RETURN VARCHAR2 IS

NUM NUMBER;
INI NUMBER;
NVAL NUMBER;
VAL VARCHAR2(1000);
T_HORARIO VARCHAR2(1000);
T_TURNO VARCHAR2(1000);
T_PERIODO VARCHAR2(1000);
P_HORA_INICIO VARCHAR2(1000);
P_HORA_FIN VARCHAR2(1000);
RES VARCHAR2(1000);

BEGIN

  SELECT ''||CEIL((LENGTH(REPLACE(HORARIO,'-','')))/3) INTO NUM  FROM DUAL;  
  
  INI:=1;
  NVAL:=1;
  
  WHILE INI <= NUM
  LOOP
  
    SELECT SUBSTR(HORARIO,NVAL,1) INTO VAL FROM DUAL;
    
    IF(VAL=NUM_DIA) THEN
      T_HORARIO:=SUBSTR(HORARIO,NVAL+1,2);
      INI:=5000;
    END IF;
    
    INI:=INI+1;
    NVAL:=NVAL+4;
  
  END LOOP;
  
  RES:=T_HORARIO;
  RETURN RES;

END ;

