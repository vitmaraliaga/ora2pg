-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

FUNCTION       FC_CONVERT_KEY_TO_NAME_RULE(
    P_VALUE IN VARCHAR2)
    RETURN VARCHAR2
    IS
    r VARCHAR2(100) := '';
BEGIN
    IF P_VALUE IS NOT NULL
    THEN

        SELECT (LISTAGG(RET.DAY, ', ') within group (order by NULL))
        INTO r
        FROM (SELECT (CASE
                          WHEN key = 1 THEN 'Lunes'
                          WHEN key = 2 THEN 'Martes'
                          WHEN key = 3 THEN 'Miércoles'
                          WHEN key = 4 THEN 'Jueves'
                          WHEN key = 5 THEN 'Viernes'
                          WHEN key = 6 THEN 'Sábado'
                          WHEN key = 7 THEN 'Domingo'
                          ELSE ''
            END) AS DAY
              FROM (SELECT REGEXP_SUBSTR(P_VALUE, '[^,]+', 1, level) AS key
                    FROM dual
                    CONNECT BY REGEXP_SUBSTR(P_VALUE, '[^,]+', 1, level) IS NOT NULL)) RET;
    END IF;

    RETURN r;
END FC_CONVERT_KEY_TO_NAME_RULE;

