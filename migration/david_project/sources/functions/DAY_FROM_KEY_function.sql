-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

FUNCTION       day_from_key(
    P_VALUE IN VARCHAR2)
    RETURN VARCHAR2
    IS
    r VARCHAR2(100) := '';
BEGIN
    IF P_VALUE IS NOT NULL
    THEN

        SELECT (LISTAGG(CD.NOMBRE, ', ') within group (order by CD.NOMBRE))
        INTO r
        FROM ELISEO.CONTA_DIA CD
        WHERE ID_DIA IN (SELECT REGEXP_SUBSTR(P_VALUE, '[^,]+', 1, level) AS parts
                         FROM dual
                         CONNECT BY REGEXP_SUBSTR(P_VALUE, '[^,]+', 1, level) IS NOT NULL);

    END IF;

    RETURN r;
END day_from_key;

