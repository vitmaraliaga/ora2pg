-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

FUNCTION       FC_MERIDIAN_CONVERTER(
    P_TIME IN VARCHAR2,
    P_SHIFT_CODE IN VARCHAR2)
    RETURN VARCHAR2
    IS
    R_MERIDIAN VARCHAR2(5) := '';
BEGIN
    IF P_TIME IS NOT NULL AND P_SHIFT_CODE IS NOT NULL
    THEN

        SELECT (CASE
                    WHEN P_SHIFT_CODE = 'M' AND TO_NUMBER(SUBSTR(P_TIME, 0, 2)) > 2
                        THEN P_TIME
                    ELSE (CASE
                              WHEN TO_NUMBER(SUBSTR(P_TIME, 0, 2)) >= 12
                                  THEN P_TIME
                              ELSE TO_CHAR(TO_DATE(TO_NUMBER(SUBSTR(P_TIME, 0, 2)) + 12 || SUBSTR(P_TIME, -3),
                                                   'hh24:mi'), 'hh24:mi')
                        END)
            END)
        INTO R_MERIDIAN
        FROM DUAL;

    END IF;

    RETURN R_MERIDIAN;
END FC_MERIDIAN_CONVERTER;

