-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = david,public;
\set ON_ERROR_STOP ON

FUNCTION       TR_INT_TO_ROMAN(P_NUMBER IN NUMBER)
    RETURN VARCHAR2
    IS
    V_ROMAN            VARCHAR2(100);
    V_NUMBERS CONSTANT SYS.DBMS_DEBUG_VC2COLL := SYS.DBMS_DEBUG_VC2COLL('M', 'CM', 'D', 'CD', 'C', 'XC', 'L', 'XL', 'X',
                                                                        'IX', 'V', 'IV', 'I');
    V_VALUES CONSTANT  SYS.DBMS_DEBUG_VC2COLL := SYS.DBMS_DEBUG_VC2COLL(1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5,
                                                                        4, 1);
    V_VALUE            NUMBER                 := P_NUMBER;

BEGIN
    V_ROMAN := '';
    FOR i IN 1 .. V_NUMBERS.COUNT
        LOOP
            WHILE V_VALUE >= V_VALUES(i)
                LOOP
                    V_ROMAN := V_ROMAN || V_NUMBERS(i);
                    V_VALUE := V_VALUE - V_VALUES(i);
                END LOOP;
        END LOOP;
    RETURN V_ROMAN;

EXCEPTION
    WHEN NO_DATA_FOUND
        THEN
            DBMS_OUTPUT.PUT_LINE(SQLERRM);
            RETURN NULL;
END TR_INT_TO_ROMAN;

