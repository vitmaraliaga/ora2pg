-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_mat_criterio_semestre (id_criterio, codigo, nombre, tipo_cobro, id_parent, dc, estado, id_afecta, tipo, orden, id_tipo_requisito_beca, comentario, tipo_alumno, resi_men, id_criterio_semestre, id_semestre_programa, importe, formula, tipo_proceso, tipo_valor, estado_cs, id_criterio_proc, tiene_hijo, id_modo_contrato, tipo_dscto, ver_hijo, id_procedure, proforma, proforma_manual, id_procedure_pro, id_procedure_pro_cri) AS SELECT
M.ID_CRITERIO,
M.CODIGO,
M.NOMBRE,
M.TIPO_COBRO,
M.ID_PARENT,
M.DC,
M.ESTADO,
M.ID_AFECTA,
M.TIPO,
M.ORDEN,
M.ID_TIPO_REQUISITO_BECA,
M.COMENTARIO,
M.TIPO_ALUMNO,
COALESCE(M.RESI_MEN,0) AS RESI_MEN,
CS.ID_CRITERIO_SEMESTRE,
CS.ID_SEMESTRE_PROGRAMA,
CS.IMPORTE,
CS.FORMULA,
CS.TIPO_PROCESO,
CS.TIPO_VALOR,
CS.ESTADO AS ESTADO_CS,
M.ID_CRITERIO_PROC,
(SELECT COUNT(*) FROM MAT_CRITERIO X WHERE X.ID_PARENT=M.ID_CRITERIO) AS TIENE_HIJO,
M.ID_MODO_CONTRATO,
M.TIPO_DSCTO,
M.VER_HIJO,
CS.ID_PROCEDURE,
M.PROFORMA,
M.PROFORMA_MANUAL,
cs.ID_PROCEDURE_PRO,
m.id_procedure_pro_cri
FROM MAT_CRITERIO M, MAT_CRITERIO_SEMESTRE CS
WHERE M.ID_CRITERIO=CS.ID_CRITERIO;

