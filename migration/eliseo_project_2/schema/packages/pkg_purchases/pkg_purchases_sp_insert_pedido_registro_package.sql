-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_purchases,public;

    -- 
CREATE OR REPLACE PROCEDURE eliseo.pkg_purchases_sp_insert_pedido_registro ( in_id_entidad bigint, in_id_depto text, in_id_tipopedido bigint, in_id_tipogasto bigint, in_id_deptoorigen text, in_id_deptodestino text, in_id_evento bigint, in_acuerdo text, in_motivo text, in_estado text, out_id_pedido out bigint, out_error out bigint, out_msgerror out text) AS $body$
BEGIN
            out_error := 0;
            out_msgerror := ' ';
            --
            --select nvl(max(id_pedido),0)+1 into out_id_pedido
            --from pedido_registro;
            --
            insert into pedido_registro(
              --id_pedido,
              id_entidad,
              id_depto,
              id_tipopedido,
              id_gasto,
              -- id_deptoorigen,
              -- id_deptodestino,
              -- id_evento,
              numero,
              acuerdo,
              fecha,
              fecha_pedido,
              fecha_entrega,
              motivo,
              estado
            )
            values (
              --out_id_pedido,
              in_id_entidad,
              in_id_depto,
              in_id_tipopedido,
              in_id_tipogasto,
              -- in_id_deptoorigen,
              -- in_id_deptodestino,
              -- in_id_evento,
              null, -- numero(auto)
              in_acuerdo,
              clock_timestamp() ,
              clock_timestamp() ,
              null ,
              in_motivo,
              in_estado
            ) returning id_pedido INTO out_id_pedido;
    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_purchases_sp_insert_pedido_registro ( in_id_entidad bigint, in_id_depto text, in_id_tipopedido bigint, in_id_tipogasto bigint, in_id_deptoorigen text, in_id_deptodestino text, in_id_evento bigint, in_acuerdo text, in_motivo text, in_estado text, out_id_pedido out bigint, out_error out bigint, out_msgerror out text) FROM PUBLIC;
