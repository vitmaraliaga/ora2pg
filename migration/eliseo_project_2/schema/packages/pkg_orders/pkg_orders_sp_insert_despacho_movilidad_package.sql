-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_orders,public;




CREATE OR REPLACE PROCEDURE eliseo.pkg_orders_sp_insert_despacho_movilidad (P_ID_MOVILIDAD bigint,P_ID_PERSONA bigint,P_KM_I bigint,P_KM_F bigint,P_HORA_S text,P_HORA_L text,P_IMPORTE bigint,P_CANTIDAD_R bigint,P_ERROR OUT bigint,P_NERROR OUT text) AS $body$
DECLARE

        L_ID_ANHO bigint;
        L_ES_SERVICES varchar(1);
        L_STOCK decimal(10,2);
        L_STOCK_T decimal(10,2);
        L_COSTO decimal(10,2);
        L_MSN varchar(200):='';
        L_MSN_ERROR varchar(200):='';


BEGIN
            
            UPDATE PEDIDO_MOVILIDAD SET KM_INICIO = P_KM_I, KM_FIN = P_KM_F, HORA_SALIDA = P_HORA_S, HORA_LLEGADA = P_HORA_L
            WHERE ID_MOVILIDAD = P_ID_MOVILIDAD;

            INSERT INTO PEDIDO_DESPACHO(ID_PERSONA,ID_MOVILIDAD,CANTIDAD,PRECIO,IMPORTE,ESTADO)
            VALUES (P_ID_PERSONA,P_ID_MOVILIDAD,1,P_IMPORTE,P_IMPORTE,'0');

            P_ERROR := 0;
            P_NERROR := 'OK';
    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_orders_sp_insert_despacho_movilidad (P_ID_MOVILIDAD bigint,P_ID_PERSONA bigint,P_KM_I bigint,P_KM_F bigint,P_HORA_S text,P_HORA_L text,P_IMPORTE bigint,P_CANTIDAD_R bigint,P_ERROR OUT bigint,P_NERROR OUT text) FROM PUBLIC;
