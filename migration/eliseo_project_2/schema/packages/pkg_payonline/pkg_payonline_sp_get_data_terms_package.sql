-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_payonline,public;




CREATE OR REPLACE PROCEDURE eliseo.pkg_payonline_sp_get_data_terms ( P_ID_ENTIDAD bigint, OUT CURSOR REFCURSOR ) AS $body$
DECLARE

    -- DATOS ALUMNO
    l_asoc_nombre varchar(300);
    l_ciudad varchar(100);
    l_direccion varchar(300);
    l_celular varchar(35);
    l_correo varchar(50);
    l_pais varchar(30);

    l_glosa varchar(150);
    l_error bigint:=0;
    l_msgerror varchar(200):='';

BEGIN
    
	  SELECT UPPER(COALESCE(D.PATERNO, D.NOMBRE)) INTO STRICT l_asoc_nombre FROM CONTA_ENTIDAD A 
	  	INNER JOIN CONTA_EMPRESA B ON A.ID_EMPRESA =B.ID_EMPRESA 
	  	INNER JOIN MOISES.PERSONA_JURIDICA C ON B.ID_RUC = C.ID_RUC 
	  	INNER JOIN MOISES.PERSONA D ON C.ID_PERSONA=D.ID_PERSONA 
	  WHERE A.ID_ENTIDAD =P_ID_ENTIDAD;
	
	  IF P_ID_ENTIDAD=7222 THEN  -- AE APCE
	  	l_ciudad := 'Lima';
	  	l_direccion := 'Jr. Washinton Nro. 1807 Int. 503 Lima - Lima - Lima';
	    l_celular := '+51 989 282 389';
	   	l_correo := 'nilton.acuna@adventistas.org';
	  ELSIF P_ID_ENTIDAD=7622 THEN  -- AE ANOP
	  	l_ciudad := 'Trujillo';
	  	l_direccion := 'Jr Borodin 755 – Urb Primavera – Trujillo';
	    l_celular := '949709835';
	   	l_correo := 'gerencia@aseanop.edu.pe';
	  ELSIF P_ID_ENTIDAD=17322 THEN  -- AE MICOP
	  	l_ciudad := 'Lima';
	  	l_direccion := 'Jr. La Confraternidad Nro. 492 Urb. Pro Lima - Lima - Los Olivos';
	    l_celular := '+51 - 989 375 246';
	    l_correo := 'gerencia@aeacop.edu.pe';
	  ELSIF P_ID_ENTIDAD=7952 THEN  -- AE MNO
	  	l_ciudad := 'Tarapoto';
	  	l_direccion := 'Jr. Ramirez Hurtado Nro. 321 San Martin - San Martin - Tarapoto';
	    l_celular := '51- 945 928 818';
	    l_correo := 'alexcug@hotmail.com';
	  ELSIF P_ID_ENTIDAD=7822 THEN   -- AE MPN
       	l_ciudad := 'Chiclayo';
        l_direccion := 'Cal.La Pinta Nro. 235 (X Av. Orrego, a 3cdras Cruce Chinchaysuyo) Lambayeque - Chiclayo - La Victoria';
        l_celular := '+51 - 948 187 699';
        l_correo := 'gerencia@aseanorte.edu.pe';
      END IF;
      l_pais := 'Perú';

--  	  <<salida_rapida>>
      OPEN CURSOR FOR
      SELECT
        l_asoc_nombre as asoc_nombre,
        l_ciudad as ciudad,
        l_direccion as direccion,
        l_celular as celular,
        l_correo as correo,
        l_pais as pais
;

    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_payonline_sp_get_data_terms ( P_ID_ENTIDAD bigint, OUT CURSOR REFCURSOR ) FROM PUBLIC;
