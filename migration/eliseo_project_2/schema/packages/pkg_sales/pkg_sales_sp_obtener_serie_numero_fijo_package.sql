-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_sales,public;




CREATE OR REPLACE PROCEDURE eliseo.pkg_sales_sp_obtener_serie_numero_fijo (P_ID_DOCUMENTO bigint,P_SERIE OUT text,P_NUMERO OUT bigint) AS $body$
DECLARE

        l_serie varchar(4):='-';
        l_numero bigint:=0;
        l_id_documento bigint;
        l_contar bigint;

BEGIN
              
            UPDATE CONTA_DOCUMENTO SET CONTADOR=CONTADOR+1
            WHERE ID_DOCUMENTO = P_ID_DOCUMENTO;

            SELECT SERIE,CONTADOR INTO STRICT P_SERIE,P_NUMERO
            FROM CONTA_DOCUMENTO 
            WHERE ID_DOCUMENTO = P_ID_DOCUMENTO;
        EXCEPTION
            WHEN OTHERS THEN
            P_SERIE := '';
            P_NUMERO := 0;

    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_sales_sp_obtener_serie_numero_fijo (P_ID_DOCUMENTO bigint,P_SERIE OUT text,P_NUMERO OUT bigint) FROM PUBLIC;
