-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION eliseo.fc_psto_cond_laboral (P_ID_CARGO_PROCESO bigint) RETURNS varchar AS $body$
DECLARE

l_dato varchar(3000):='';
l_nombre varchar(50);
p_conta integer;

CUR CURSOR FOR
SELECT A.ID_COND_LAB
FROM PSTO_PLLA_CARGO_PROCESO_CONLAB A,APS_CONDICION_LABORAL B
WHERE A.ID_COND_LAB = B.ID_COND_LAB
AND A.ID_CARGO_PROCESO=P_ID_CARGO_PROCESO
ORDER BY B.ID_COND_LAB;



BEGIN
    p_conta:=1;
    open CUR;
        fetch CUR into l_nombre;
        while CUR%found loop
            if p_conta = 1 then
                l_dato := l_nombre;
            else
                l_dato := l_dato||'|'||l_nombre;
            end if;

            fetch CUR into l_nombre;
            p_conta:=p_conta+1;
        end loop;
	close CUR;	
	
	RETURN(l_dato);
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION eliseo.fc_psto_cond_laboral (P_ID_CARGO_PROCESO bigint) FROM PUBLIC;

