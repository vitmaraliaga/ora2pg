-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION eliseo.fc_moneda_entidad (P_ID_ENTIDAD bigint,P_ID_ANHO bigint,P_OPTION bigint DEFAULT 0) RETURNS varchar AS $body$
DECLARE

--P_OPTION ------> 0=NOMBRE; 1=NOMBRE PLURAL; 2=SIGLAS; 3 = SIMBOLO
    r_dato  varchar(200):='';
   	l_nombre varchar(50);
  	l_nombre_plural varchar(50);
  	l_simbolo varchar(50);
  	l_siglas varchar(50);

BEGIN

	    SELECT B.NOMBRE,B.NOMBRE_PLURAL,B.SIMBOLO,B.SIGLAS INTO STRICT l_nombre,l_nombre_plural,l_simbolo,l_siglas FROM ELISEO.CONTA_ENTIDAD_ANHO_CONFIG A
		INNER JOIN ELISEO.CONTA_MONEDA B ON A.ID_MONEDA = B.ID_MONEDA 
		WHERE A.ID_ENTIDAD = P_ID_ENTIDAD
		AND A.ID_ANHO = P_ID_ANHO
		AND B.ESTADO = '1'  LIMIT 1;

	IF P_OPTION = 0 THEN
		r_dato := l_nombre;
	ELSIF P_OPTION = 1 THEN
		r_dato := l_nombre_plural;
	ELSIF P_OPTION = 2 THEN
		r_dato := l_siglas;
	ELSIF P_OPTION = 3 THEN
		r_dato := l_simbolo;
	ELSE
		r_dato := '';
	END IF;

	 RETURN( trim(both r_dato) );
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION eliseo.fc_moneda_entidad (P_ID_ENTIDAD bigint,P_ID_ANHO bigint,P_OPTION bigint DEFAULT 0) FROM PUBLIC;

