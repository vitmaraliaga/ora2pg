-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

PROCEDURE        iudp_Concepto_Planilla
(P_Modo IN int,P_ID_CONCEPTOAPS IN int, P_ID_TIPOCONCEPTOAPS IN int, P_NOMBRE IN varchar, P_COD_SUNAT IN VARCHAR) AS

S_CANTIDAD            INT;
BEGIN
IF P_Modo=0 THEN
    SELECT COUNT(*) INTO S_CANTIDAD FROM APS_CONCEPTO_PLANILLA WHERE ID_CONCEPTOAPS = P_ID_CONCEPTOAPS; 

    IF P_ID_CONCEPTOAPS != 1559 
    THEN
	    IF S_CANTIDAD = 0 
	    THEN
	      INSERT INTO APS_CONCEPTO_PLANILLA (ID_CONCEPTOAPS, ID_TIPOCONCEPTOAPS, NOMBRE, COD_SUNAT)
	        VALUES (P_ID_CONCEPTOAPS, P_ID_TIPOCONCEPTOAPS, P_NOMBRE, P_COD_SUNAT);
	    ELSE
	      UPDATE APS_CONCEPTO_PLANILLA SET
	        ID_TIPOCONCEPTOAPS = P_ID_TIPOCONCEPTOAPS,
	        NOMBRE             = P_NOMBRE,
	        COD_SUNAT          = P_COD_SUNAT
	      WHERE ID_CONCEPTOAPS = P_ID_CONCEPTOAPS;
	    END IF;
    END IF;
END IF;
END;

