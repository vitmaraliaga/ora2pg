-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

FUNCTION        FC_NUMERO_TEXTO(P_NUMERO IN NUMBER,P_SOLO_NUMERO IN NUMBER DEFAULT 0) RETURN VARCHAR2 IS
    r_numero  varchar2(200);
    t_numero number(10);
    t_millones number(4);
    t_miles	  number(4);
    t_centenas number(4);
    t_decimal number(4);
    BEGIN
        t_decimal	:= mod(round(P_NUMERO,2)*100,100);
        t_numero	:= P_NUMERO-(t_decimal/100);
        t_centenas := mod(t_numero,1000);
        t_miles	:= mod((t_numero-t_centenas)/1000,1000);
        t_millones := (t_numero-((t_miles*1000)+t_centenas))/1000000;

        if t_millones>0 then
            if t_millones=1 then
                r_numero := 'un';
            else
                r_numero := replace(trim(FC_NUMTXT_TODO(t_millones)),'uno','un');
            end if;
            r_numero := r_numero||' millon ';
            if  t_millones > 1 then
                r_numero := trim(r_numero)||'es ';
            end if;
        end if;

        if t_miles>0 then
            if  t_miles > 1 then
                r_numero := r_numero || replace(trim(FC_NUMTXT_TODO(t_miles)),'uno','un');
            end if;
            r_numero := r_numero||' mil ';
        end if;
        r_numero := r_numero||trim(FC_NUMTXT_TODO(t_centenas));

        if t_numero < 1 then
            r_numero := 'cero';
        end if;
       
       	IF P_SOLO_NUMERO != 1 THEN 
	        r_numero := r_numero||' con ';
	        r_numero := r_numero||trim(to_char(t_decimal,'00'))||'/100';
       	END IF;

	 RETURN( trim(r_numero) );
END;

