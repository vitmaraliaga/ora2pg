-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = jairo,public;
\set ON_ERROR_STOP ON

FUNCTION HAS_ACT_FIN_REQ_FIN_INPUT(
    p_id_mapa_iniciativa IN NUMBER,
    p_semestre IN NUMBER
) RETURN NUMBER IS
    v_count NUMBER;
BEGIN
	
    IF p_id_mapa_iniciativa IS NULL OR p_semestre IS NULL THEN
        RETURN 0;
    END IF;

    SELECT COUNT(*)
    INTO v_count
    FROM JAIRO.SGE_ACTIVIDAD
    WHERE ID_MAPA_INICIATIVA = p_id_mapa_iniciativa
      AND ID_SEMESTRE = p_semestre
      AND ID_ESTADO = 5
      AND ID_APORTE IS NULL;

    RETURN CASE
             WHEN v_count > 0 THEN 1
             ELSE 0
           END;
END;

