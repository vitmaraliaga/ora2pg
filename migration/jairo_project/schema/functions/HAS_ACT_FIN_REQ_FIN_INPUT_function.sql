-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = jairo,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE FUNCTION jairo.has_act_fin_req_fin_input ( p_id_mapa_iniciativa bigint, p_semestre bigint ) RETURNS bigint AS $body$
DECLARE

    v_count bigint;

BEGIN
	
    IF coalesce(p_id_mapa_iniciativa::text, '') = '' OR coalesce(p_semestre::text, '') = '' THEN
        RETURN 0;
    END IF;

    SELECT COUNT(*)
    INTO STRICT v_count
    FROM JAIRO.SGE_ACTIVIDAD
    WHERE ID_MAPA_INICIATIVA = p_id_mapa_iniciativa
      AND ID_SEMESTRE = p_semestre
      AND ID_ESTADO = 5
      AND coalesce(ID_APORTE::text, '') = '';

    RETURN CASE
             WHEN v_count > 0 THEN 1
             ELSE 0
           END;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
 STABLE;
-- REVOKE ALL ON FUNCTION jairo.has_act_fin_req_fin_input ( p_id_mapa_iniciativa bigint, p_semestre bigint ) FROM PUBLIC;

