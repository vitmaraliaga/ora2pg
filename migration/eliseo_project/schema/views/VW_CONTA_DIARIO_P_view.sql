-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_conta_diario_p (id_diario, id_diario_detalle, id_empresa, id_entidad, id_anho, id_mes, id_tipoasiento, id_fondo, id_tipoplan, id_cuentaaasi, id_depto, cos_valor, id_cuentaaasi_1, id_cuentaaasi_2, id_cuentaaasi_3) AS SELECT
  CONTA_DIARIO.ID_DIARIO,
  CONTA_DIARIO_DETALLE.ID_DIARIO_DETALLE,
  CONTA_ENTIDAD.ID_EMPRESA,
  CONTA_DIARIO.ID_ENTIDAD,
  CONTA_DIARIO.ID_ANHO,
  CONTA_DIARIO.ID_MES,
  CONTA_DIARIO.ID_TIPOASIENTO,
  CONTA_DIARIO_DETALLE.ID_FONDO,
  CONTA_DIARIO_DETALLE.ID_TIPOPLAN,
  CONTA_DIARIO_DETALLE.ID_CUENTAAASI,
  CONTA_DIARIO_DETALLE.ID_DEPTO,
  CONTA_DIARIO_DETALLE.COS_VALOR,
  SUBSTR(CONTA_DIARIO_DETALLE.ID_CUENTAAASI,0,1) ID_CUENTAAASI_1,
  SUBSTR(CONTA_DIARIO_DETALLE.ID_CUENTAAASI,0,2) ID_CUENTAAASI_2,
  SUBSTR(CONTA_DIARIO_DETALLE.ID_CUENTAAASI,0,3) ID_CUENTAAASI_3
FROM CONTA_ENTIDAD
INNER JOIN CONTA_DIARIO ON
  CONTA_ENTIDAD.ID_ENTIDAD = CONTA_DIARIO.ID_ENTIDAD
INNER JOIN CONTA_DIARIO_DETALLE ON
  CONTA_DIARIO.ID_ENTIDAD = CONTA_DIARIO_DETALLE.ID_ENTIDAD AND
  CONTA_DIARIO.ID_DIARIO = CONTA_DIARIO_DETALLE.ID_DIARIO
WHERE CONTA_DIARIO.ID_TIPOASIENTO <> 'AJ';

