-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_venta_detalle (id_vdetalle, id_venta, id_tipoigv, id_almacen, id_articulo, id_dinamica, detalle, dc, cantidad, precio, precio_base, precio_alm, base, igv, descuento, importe, precio_me, precio_base_me, precio_alm_me, base_me, igv_me, descuento_me, importe_me, item, importe_adescontar, descuento_porcentaje, id_tipoorigen, otros_cargos, otros_cargos_me, id_vdetalle_ori) AS SELECT
ID_VDETALLE,
ID_VENTA,
ID_TIPOIGV,
ID_ALMACEN,
ID_ARTICULO,
ID_DINAMICA,
DETALLE,
DC,
CANTIDAD,
PRECIO,
PRECIO_BASE,
PRECIO_ALM,
CASE WHEN DC='C' THEN BASE*(-1) ELSE BASE END AS BASE,
CASE WHEN DC='C' THEN IGV*(-1) ELSE IGV END AS IGV ,
CASE WHEN DC='C' THEN DESCUENTO*(-1) ELSE DESCUENTO END AS DESCUENTO ,
CASE WHEN DC='C' THEN IMPORTE*(-1) ELSE IMPORTE END AS IMPORTE ,
PRECIO_ME,
PRECIO_BASE_ME,
PRECIO_ALM_ME,
CASE WHEN DC='C' THEN BASE_ME*(-1) ELSE BASE_ME END AS BASE_ME,
CASE WHEN DC='C' THEN IGV_ME*(-1) ELSE IGV_ME END AS IGV_ME, 
CASE WHEN DC='C' THEN DESCUENTO_ME*(-1) ELSE DESCUENTO_ME END AS DESCUENTO_ME,
CASE WHEN DC='C' THEN IMPORTE_ME*(-1) ELSE IMPORTE_ME END AS IMPORTE_ME,
ITEM,
IMPORTE_ADESCONTAR,
DESCUENTO_PORCENTAJE,
ID_TIPOORIGEN,
CASE WHEN DC='C' THEN OTROS_CARGOS*(-1) ELSE OTROS_CARGOS END AS OTROS_CARGOS ,
CASE WHEN DC='C' THEN OTROS_CARGOS_ME*(-1) ELSE OTROS_CARGOS_ME END AS OTROS_CARGOS_ME,
ID_VDETALLE_ORI
FROM VENTA_DETALLE;

