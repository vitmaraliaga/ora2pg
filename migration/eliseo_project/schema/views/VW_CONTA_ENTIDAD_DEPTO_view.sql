-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_conta_entidad_depto (id_entidad, id_depto, id_grupo, nom_departamento, nom_grupo) AS SELECT
  CONTA_ENTIDAD_DEPTO.ID_ENTIDAD,
  CONTA_ENTIDAD_DEPTO.ID_DEPTO,
  CONTA_ENTIDAD_DEPTO_Grupo.ID_GRUPO,
  CONTA_ENTIDAD_DEPTO.NOMBRE AS NOM_DEPARTAMENTO,
  coalesce(CONTA_ENTIDAD_GRUPO.NOMBRE, '(Sin grupo)') AS NOM_GRUPO
FROM CONTA_ENTIDAD_DEPTO
LEFT JOIN CONTA_ENTIDAD_DEPTO_Grupo ON
  CONTA_ENTIDAD_DEPTO.ID_ENTIDAD = CONTA_ENTIDAD_DEPTO_Grupo.ID_ENTIDAD AND
  CONTA_ENTIDAD_DEPTO.ID_DEPTO = CONTA_ENTIDAD_DEPTO_Grupo.ID_DEPTO
LEFT JOIN CONTA_ENTIDAD_GRUPO ON
  CONTA_ENTIDAD_DEPTO_Grupo.ID_ENTIDAD = CONTA_ENTIDAD_GRUPO.ID_ENTIDAD AND
  CONTA_ENTIDAD_DEPTO_Grupo.ID_GRUPO = CONTA_ENTIDAD_GRUPO.ID_GRUPO;

