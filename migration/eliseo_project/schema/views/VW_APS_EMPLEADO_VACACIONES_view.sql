-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_aps_empleado_vacaciones (id_entidad, id_persona, id_contrato, id_anho, id_mes, id_anhovacaciones, num_diasvacaciones, fec_iniciovacaciones, fec_terminovacaciones) AS SELECT
  APS_PLANILLA_DETALLE.ID_ENTIDAD,
  APS_PLANILLA_DETALLE.ID_PERSONA,
  APS_PLANILLA_DETALLE.ID_CONTRATO,
  APS_PLANILLA_DETALLE.ID_ANHO,
  APS_PLANILLA_DETALLE.ID_MES,
  utils.year_(APS_PLANILLA_DETALLE.FEC_SALIDA) AS ID_ANHOVACACIONES,
  APS_PLANILLA_DETALLE.COS_REFERENCIA1 AS NUM_DIASVACACIONES,
  APS_PLANILLA_DETALLE.FEC_RETORNO AS FEC_INICIOVACACIONES,
  utils.dateadd('DAY', APS_PLANILLA_DETALLE.COS_REFERENCIA1 - 1, APS_PLANILLA_DETALLE.FEC_RETORNO) AS FEC_TERMINOVACACIONES
FROM APS_PLANILLA_DETALLE
WHERE APS_PLANILLA_DETALLE.ID_TIPOPLANILLA = 3
  AND APS_PLANILLA_DETALLE.ID_CONCEPTOAPS = 2000;

