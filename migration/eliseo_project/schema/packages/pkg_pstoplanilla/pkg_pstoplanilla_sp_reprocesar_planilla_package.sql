-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_pstoplanilla,public;




CREATE OR REPLACE PROCEDURE eliseo.pkg_pstoplanilla_sp_reprocesar_planilla (P_ID_ENTIDAD bigint,P_ID_ANHO bigint,P_ID_DEPTO_PADRE text,P_ERROR OUT bigint,P_MSGERROR out text) AS $body$
DECLARE

          l_error bigint:=0;
          l_msgerror varchar(200):='';

          l_id_psto_planilla bigint;

          cur CURSOR FOR  SELECT ID_PSTO_PLANILLA from  PSTO_PLLA_PLANILLA 
          WHERE ID_ENTIDAD=P_ID_ENTIDAD 
          AND P_ID_DEPTO_PADRE=P_ID_DEPTO_PADRE 
          AND ID_ANHO=P_ID_ANHO;

        
BEGIN
        
          OPEN cur;
          FETCH cur INTO l_id_psto_planilla;

          WHILE cur%FOUND LOOP
  
                CALL pkg_pstoplanilla_sp_actualizar_planilla_emp(l_id_psto_planilla,l_error,l_msgerror);

            FETCH cur INTO l_id_psto_planilla;

          END LOOP;
          CLOSE cur;

          P_ERROR:=l_error;
          P_MSGERROR:=l_msgerror;

        END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_pstoplanilla_sp_reprocesar_planilla (P_ID_ENTIDAD bigint,P_ID_ANHO bigint,P_ID_DEPTO_PADRE text,P_ERROR OUT bigint,P_MSGERROR out text) FROM PUBLIC;
