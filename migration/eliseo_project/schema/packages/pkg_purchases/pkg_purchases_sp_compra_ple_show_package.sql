-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_purchases,public;




CREATE OR REPLACE PROCEDURE eliseo.pkg_purchases_sp_compra_ple_show ( P_ID_EMPRESA bigint, P_ID_ENTIDAD bigint, P_ID_DEPTO text, P_ID_MES bigint, P_ID_ANHO bigint, P_TIPO_LIBRO text DEFAULT '81', OUT CURSOR REFCURSOR ) AS $body$
BEGIN

    IF P_TIPO_LIBRO = '81' THEN 
	    if P_ID_ANHO < 2020 then 
	         CALL pkg_purchases_sp_compra_ple_5_1_show(P_ID_EMPRESA,P_ID_ENTIDAD,P_ID_DEPTO,P_ID_MES,P_ID_ANHO,cursor);
	    end if;
	
	    if P_ID_ANHO = 2020 then 
	        if P_ID_MES < 12 then 
	             CALL pkg_purchases_sp_compra_ple_5_1_show(P_ID_EMPRESA,P_ID_ENTIDAD,P_ID_DEPTO,P_ID_MES,P_ID_ANHO,cursor);
	        else
	             CALL pkg_purchases_sp_compra_ple_5_2_show(P_ID_EMPRESA,P_ID_ENTIDAD,P_ID_DEPTO,P_ID_MES,P_ID_ANHO,cursor);
	        end if;
	    end if;
	
	    if P_ID_ANHO > 2020 then 
	         CALL pkg_purchases_sp_compra_ple_5_2_show(P_ID_EMPRESA,P_ID_ENTIDAD,P_ID_DEPTO,P_ID_MES,P_ID_ANHO,cursor);
	    end if;
	ELSIF P_TIPO_LIBRO = '82' THEN
		--if P_ID_ANHO > 2020 then 
	         CALL pkg_purchases_sp_compra_ple_82_show(P_ID_EMPRESA,P_ID_ENTIDAD,P_ID_DEPTO,P_ID_MES,P_ID_ANHO,cursor);
	    --END IF;
    END IF;

    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_purchases_sp_compra_ple_show ( P_ID_EMPRESA bigint, P_ID_ENTIDAD bigint, P_ID_DEPTO text, P_ID_MES bigint, P_ID_ANHO bigint, P_TIPO_LIBRO text DEFAULT '81', OUT CURSOR REFCURSOR ) FROM PUBLIC;
