-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_purchases,public;

    --
CREATE OR REPLACE PROCEDURE eliseo.pkg_purchases_sp_insert_process_paso_run ( in_id_registro bigint, in_id_paso bigint, in_id_persona bigint, in_detalle text, in_numero bigint, in_revisado text, in_ip text, in_estado text, in_id_paso_next bigint, out_id_detalle out bigint, out_error out bigint, out_msgerror out text) AS $body$
BEGIN
            out_error := 0;
            out_msgerror := ' ';
            -- 
            --select nvl(max(id_detalle),0)+1 into out_id_detalle
            --from process_paso_run;
            --
            insert into process_paso_run(
              --id_detalle,
              id_registro,
              id_paso,
              id_persona,
              fecha,
              detalle,
              numero,
              revisado,
              ip,
              estado,
              id_paso_next
            )
            values (
              --out_id_detalle,
              in_id_registro,
              in_id_paso,
              in_id_persona,
              clock_timestamp(),
              in_detalle,
              in_numero,
              in_revisado,
              in_ip,
              in_estado,
              in_id_paso_next
            ) RETURNING ID_DETALLE INTO out_id_detalle;
    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_purchases_sp_insert_process_paso_run ( in_id_registro bigint, in_id_paso bigint, in_id_persona bigint, in_detalle text, in_numero bigint, in_revisado text, in_ip text, in_estado text, in_id_paso_next bigint, out_id_detalle out bigint, out_error out bigint, out_msgerror out text) FROM PUBLIC;
