-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_purchases,public;

    -- 
CREATE OR REPLACE PROCEDURE eliseo.pkg_purchases_sp_insert_pedido_file ( in_id_pedido bigint, in_nombre text, in_formato text, in_url text, in_tipo text, in_estado text, out_id_pfile out bigint, out_error out bigint, out_msgerror out text) AS $body$
BEGIN
            out_error := 0;
            out_msgerror := ' ';
            -- 
            --select nvl(max(id_pfile),0)+1 into out_id_pfile
            --from pedido_file;
            --
            insert into pedido_file(
              --id_pfile,
              id_pedido,
              nombre,
              formato,
              url,
              fecha,
              tipo,
              estado
            )
            values (
              --out_id_pfile,
              in_id_pedido,
              in_nombre,
              in_formato,
              in_url,
              clock_timestamp(),
              in_tipo,
              in_estado
            ) returning id_pfile INTO out_id_pfile;
    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_purchases_sp_insert_pedido_file ( in_id_pedido bigint, in_nombre text, in_formato text, in_url text, in_tipo text, in_estado text, out_id_pfile out bigint, out_error out bigint, out_msgerror out text) FROM PUBLIC;
