-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';
SET search_path = eliseo,pkg_purchases,public;

    -- 
CREATE OR REPLACE PROCEDURE eliseo.pkg_purchases_sp_insert_process_run ( in_id_proceso bigint, in_id_operacion bigint, in_detalle text, in_estado text, in_id_paso_actual bigint, out_id_registro out bigint, out_error out bigint, out_msgerror out text) AS $body$
BEGIN
            out_error := 0;
            out_msgerror := ' ';
            -- 
            --select nvl(max(id_registro),0)+1 into out_id_registro
            --from process_run;
            --
            insert into process_run(
              --id_registro,
              id_proceso,
              id_operacion,
              fecha,
              detalle,
              estado,
              id_paso_actual
            )
            values (
              --out_id_registro,
              in_id_proceso,
              in_id_operacion,
              clock_timestamp(),
              in_detalle,
              in_estado,
              in_id_paso_actual
            ) returning id_registro INTO out_id_registro;
    END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.pkg_purchases_sp_insert_process_run ( in_id_proceso bigint, in_id_operacion bigint, in_detalle text, in_estado text, in_id_paso_actual bigint, out_id_registro out bigint, out_error out bigint, out_msgerror out text) FROM PUBLIC;
