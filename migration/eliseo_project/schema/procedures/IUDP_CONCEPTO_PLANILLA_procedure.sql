-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE PROCEDURE eliseo.iudp_concepto_planilla (P_Modo integer,P_ID_CONCEPTOAPS integer, P_ID_TIPOCONCEPTOAPS integer, P_NOMBRE text, P_COD_SUNAT text) AS $body$
DECLARE


S_CANTIDAD            integer;

BEGIN
IF P_Modo=0 THEN
    SELECT COUNT(*) INTO STRICT S_CANTIDAD FROM APS_CONCEPTO_PLANILLA WHERE ID_CONCEPTOAPS = P_ID_CONCEPTOAPS;

    IF P_ID_CONCEPTOAPS != 1559 
    THEN
	    IF S_CANTIDAD = 0 
	    THEN
	      INSERT INTO APS_CONCEPTO_PLANILLA(ID_CONCEPTOAPS, ID_TIPOCONCEPTOAPS, NOMBRE, COD_SUNAT)
	        VALUES (P_ID_CONCEPTOAPS, P_ID_TIPOCONCEPTOAPS, P_NOMBRE, P_COD_SUNAT);
	    ELSE
	      UPDATE APS_CONCEPTO_PLANILLA SET
	        ID_TIPOCONCEPTOAPS = P_ID_TIPOCONCEPTOAPS,
	        NOMBRE             = P_NOMBRE,
	        COD_SUNAT          = P_COD_SUNAT
	      WHERE ID_CONCEPTOAPS = P_ID_CONCEPTOAPS;
	    END IF;
    END IF;
END IF;
END;
$body$
LANGUAGE PLPGSQL
SECURITY DEFINER
;
-- REVOKE ALL ON PROCEDURE eliseo.iudp_concepto_planilla (P_Modo integer,P_ID_CONCEPTOAPS integer, P_ID_TIPOCONCEPTOAPS integer, P_NOMBRE text, P_COD_SUNAT text) FROM PUBLIC;

