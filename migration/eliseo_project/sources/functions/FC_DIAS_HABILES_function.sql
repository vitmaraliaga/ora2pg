-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

FUNCTION        FC_DIAS_HABILES(FECHA IN DATE) RETURN NUMBER IS
FECHA_I DATE;
DIAS NUMBER(10);
NRO_DIA NUMBER(10);
DIA_1 NUMBER(10);
FECHA_INI DATE; 
BEGIN
    DIAS := 0;
    SELECT TO_CHAR(TO_DATE(SYSDATE),'YYYY-MM')||'-01' INTO FECHA_INI 
    FROM DUAL;
    
    IF FECHA >= FECHA_INI THEN
        WHILE FECHA_INI <= FECHA LOOP
            SELECT TO_CHAR(FECHA_INI,'D') INTO NRO_DIA 
            FROM DUAL;
            IF NRO_DIA = 1 OR NRO_DIA = 7 THEN
                DIA_1 :=0;
            ELSE
                DIAS := DIAS + 1;
            END IF;
            FECHA_INI := FECHA_INI + 1;
        END LOOP;
    ELSE
        DIAS :=0;
    END IF;
    
    RETURN DIAS;
END;

