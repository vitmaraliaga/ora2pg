-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_aps_empleado (paterno, materno, nombre, nom_persona, id_tipodocumento, num_documento, sexo, fec_nacimiento, id_corporacion, id_empresa, id_entidad, id_persona, id_contrato, id_tipocontrato, id_categoriaocupacional, id_tipocese, cod_aps, cod_asistencia, fec_inicio, fec_termino, fec_entidad, fec_misionero, num_snp, num_cuspp, id_depto, estado) AS SELECT
  vw_Persona_Natural.PATERNO,
  vw_Persona_Natural.MATERNO,
  vw_Persona_Natural.NOMBRE,
  vw_Persona_Natural.NOM_PERSONA,
  vw_Persona_Natural.ID_TIPODOCUMENTO,
  vw_Persona_Natural.NUM_DOCUMENTO,
  vw_Persona_Natural.SEXO,
  vw_Persona_Natural.FEC_NACIMIENTO,
  CONTA_EMPRESA.ID_CORPORACION,
  CONTA_ENTIDAD.ID_EMPRESA,
  APS_EMPLEADO.ID_ENTIDAD,
  APS_EMPLEADO.ID_PERSONA,
  APS_EMPLEADO.ID_CONTRATO,
  APS_EMPLEADO.ID_TIPOCONTRATO,
	APS_EMPLEADO.ID_CATEGORIAOCUPACIONAL,
	APS_EMPLEADO.ID_TIPOCESE,
  APS_EMPLEADO.COD_APS,
  APS_EMPLEADO.COD_ASISTENCIA,
  APS_EMPLEADO.FEC_INICIO,
  APS_EMPLEADO.FEC_TERMINO,
  APS_EMPLEADO.FEC_ENTIDAD,
  APS_EMPLEADO.FEC_MISIONERO,
  SNP.NUM_DOCUMENTO AS NUM_SNP,
  CUSPP.NUM_DOCUMENTO AS NUM_CUSPP,
  APS_EMPLEADO.ID_DEPTO,
	APS_EMPLEADO.ESTADO
FROM APS_EMPLEADO
INNER JOIN CONTA_ENTIDAD ON
  APS_EMPLEADO.ID_ENTIDAD = CONTA_ENTIDAD.ID_ENTIDAD
INNER JOIN CONTA_EMPRESA ON
  CONTA_ENTIDAD.ID_EMPRESA = CONTA_EMPRESA.ID_EMPRESA
INNER JOIN MOISES.vw_Persona_Natural ON
  APS_EMPLEADO.ID_PERSONA = vw_Persona_Natural.ID_PERSONA
LEFT JOIN MOISES.Persona_Documento SNP ON
  APS_EMPLEADO.ID_PERSONA = SNP.ID_PERSONA AND
  SNP.ID_TIPODOCUMENTO = 97
LEFT JOIN MOISES.Persona_Documento CUSPP ON
  APS_EMPLEADO.ID_PERSONA = CUSPP.ID_PERSONA AND
  CUSPP.ID_TIPODOCUMENTO = 98;

