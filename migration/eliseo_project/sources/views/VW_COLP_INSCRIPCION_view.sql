-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = eliseo,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_colp_inscripcion (codigo, id_asistente_campanha, id_asistente, id_campanha, id_almacen, id_rcategoria, id_colportor, id_rcategoria_ins, id_estado, estado, limite_credito, fecha, id_asist_camp_dep, deuda) AS SELECT
	A .CODIGO,
	B.ID_ASISTENTE_CAMPANHA,
	C.ID_ASISTENTE,
	C.ID_CAMPANHA,
	C.ID_ALMACEN,
	C.ID_RCATEGORIA,
	B.ID_COLPORTOR,
	B.ID_RCATEGORIA_INS,
	B.ID_ESTADO,
	B.ESTADO,
	B.LIMITE_CREDITO,
	B.FECHA,
	B.ID_ASIST_CAMP_DEP,
	(SELECT DEUDA FROM VW_COLPORTOR_CAMPANHA_RESUMEN WHERE ID_COLPORTOR = B.ID_COLPORTOR AND ID_ASISTENTE_CAMPANHA = B.ID_ASIST_CAMP_DEP AND ESTADO='0') AS DEUDA
FROM
	COLP_COLPORTOR A
INNER JOIN COLP_INSCRIPCION B ON A .ID_COLPORTOR = B.ID_COLPORTOR
INNER JOIN COLP_ASISTENTE_CAMPANHA C ON B.ID_ASISTENTE_CAMPANHA = C.ID_ASISTENTE_CAMPANHA;

