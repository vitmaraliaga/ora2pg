-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = enoc,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_solic_req_candidato (id_solic_req_candidato, id_solic_reque, id_persona, id_estado_req_cand, nota_final, resultado, observacion, cv_url, cv_vc, id_user_reg, fecha_reg, id_user_mod, fecha_mod, sueldo_sugerido, contrato_mensual, modo_pago, id_paso_reque, validado, estado_req_cand, estado_req_cand_corto, nom_ape, celular, correo, num_documento, tipo_contrato, costo_hora, sueldo, fecha_ini, fecha_fin) AS select 
A.ID_SOLIC_REQ_CANDIDATO,
A.ID_SOLIC_REQUE,
A.ID_PERSONA,
A.ID_ESTADO_REQ_CAND,
A.NOTA_FINAL,
A.RESULTADO,
A.OBSERVACION,
A.CV_URL,
A.CV_VC,
A.ID_USER_REG,
A.FECHA_REG,
A.ID_USER_MOD,
A.FECHA_MOD,
A.SUELDO_SUGERIDO,
A.CONTRATO_MENSUAL,
A.MODO_PAGO,
A.ID_PASO_REQUE,
A.VALIDADO,
C.NOMBRE AS ESTADO_REQ_CAND,
C.NOMBRECORTO AS ESTADO_REQ_CAND_CORTO,
PN.NOMBREAPELLIDO AS NOM_APE,
PN.CELULAR,
PN.CORREO,
PN.NUM_DOCUMENTO,
cl.nombre as TIPO_CONTRATO,
CASE WHEN s.ID_TIPO_TIEMPO_TRABAJO=3 THEN 'S/. '||TO_CHAR(A.SUELDO_SUGERIDO) ELSE '' END AS COSTO_HORA,
CASE WHEN s.ID_TIPO_TIEMPO_TRABAJO<>3 THEN 'S/. '||TO_CHAR(A.SUELDO_SUGERIDO) ELSE '' END AS SUELDO,
TO_CHAR(s.fecha_ini,'DD/MM/YYYY') AS fecha_ini,
TO_CHAR(s.fecha_FIN,'DD/MM/YYYY') AS fecha_FIN
FROM ENOC.PLLA_SOLIC_REQ_CANDIDATO A,ENOC.VW_PERSONA_NATURAL PN, ENOC.PLLA_ESTADO_REQ_CAND C,
ENOC.plla_solic_reque s,moises.condicion_laboral cl
WHERE A.ID_PERSONA=PN.ID_PERSONA
AND A.ID_ESTADO_REQ_CAND=C.ID_ESTADO_REQ_CAND
and A.id_solic_reque=s.id_solic_reque
and s.id_condicion_laboral=cl.id_condicion_laboral;

