-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = moises,public;
\set ON_ERROR_STOP ON

CREATE OR REPLACE VIEW vw_persona_natural_alumno (id_persona, id_erp, paterno, materno, nombre, sexo, fec_nacimiento, nom_persona, id_tipodocumento, num_documento, codigo, foto) AS SELECT Persona.ID_PERSONA,
          PERSONA_NATURAL_ALUMNO.ID_ERP,
          Persona.PATERNO,
          Persona.MATERNO,
          Persona.NOMBRE,
          Persona_Natural.SEXO,
          Persona_Natural.FEC_NACIMIENTO,
             UPPER(
                   coalesce(Persona.PATERNO || ' ', '')
                || coalesce(Persona.MATERNO || ', ', ''))
          ||                                             /*dbo.fn_NomPropio(*/
            Persona.NOMBRE                                               /*)*/
             AS NOM_PERSONA,
          coalesce(Persona_Natural.ID_TIPODOCUMENTO,1) as ID_TIPODOCUMENTO,
          coalesce(Persona_Natural.NUM_DOCUMENTO,' ') as NUM_DOCUMENTO,
          Persona_Natural_Alumno.CODIGO,
          PERSONA_NATURAL.FOTO
     FROM Persona
          INNER JOIN Persona_Natural
             ON Persona.ID_PERSONA = Persona_Natural.ID_PERSONA
          INNER JOIN Persona_Natural_Alumno
             ON Persona.ID_PERSONA = Persona_Natural_Alumno.ID_PERSONA;

