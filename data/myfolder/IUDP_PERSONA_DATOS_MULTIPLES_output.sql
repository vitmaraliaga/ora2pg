-- Generated by Ora2Pg, the Oracle database Schema converter, version 25.0
-- Copyright 2000-2025 Gilles DAROLD. All rights reserved.
-- DATASOURCE: dbi:Oracle:host=10.174.11.5;sid=upeu;port=1521

SET client_encoding TO 'UTF8';

SET search_path = moises,public;
\set ON_ERROR_STOP ON





CREATE OR REPLACE PROCEDURE moises.iudp_persona_datos_multiples ( P_Modo integer, P_NUM_DOCUMENTO text, P_ID_TIPODOCUMENTO integer, P_NOMBRE text, P_PATERNO text, P_MATERNO text, P_ID_ESTADOCIVIL integer, P_COD_PAIS integer, P_SEXO text, P_FEC_NACIMIENTO text, P_EMAIL text DEFAULT NULL, P_FIJO text DEFAULT NULL, P_CELULAR text DEFAULT NULL, P_RESIDENCIA text DEFAULT NULL, P_NUM_SNP text DEFAULT NULL, P_NUM_CUSPP text DEFAULT NULL, P_ID_ENTIDAD integer DEFAULT NULL, P_ID_CONTRATO integer DEFAULT NULL, P_ID_REGIMENLABORAL integer DEFAULT NULL, P_ES_DISCAPACITADO text DEFAULT NULL, P_FEC_INICIOAFP text DEFAULT NULL, P_FEC_INICIOONP text DEFAULT NULL, P_ID_CATEGORIAOCUPACIONAL integer DEFAULT NULL, P_ID_TIPOCONTRATO integer DEFAULT NULL, P_ID_TIPOPAGO integer DEFAULT NULL, P_ID_PAGOPERIODO integer DEFAULT NULL, P_ID_TIPOJORNADA integer DEFAULT NULL, P_ID_REGIMENSALUD integer DEFAULT NULL, P_ID_TIPOCESE integer DEFAULT NULL, P_COD_EPS text DEFAULT NULL, P_COD_APS text DEFAULT NULL, P_COD_ASISTENCIA integer DEFAULT NULL, P_FEC_INICIO text DEFAULT NULL, P_FEC_TERMINO text DEFAULT NULL, P_FEC_ENTIDAD text DEFAULT NULL, P_FEC_MISIONERO text DEFAULT NULL,P_ENTIDADDEPTO text DEFAULT NULL,P_LICENCIA_ACTIVO_CODE text DEFAULT NULL, P_COD_ASSINET text DEFAULT null) AS $body$
DECLARE


S_ID_PERSONA integer;
S_SEXO varchar(100);
S_COD_ASSINET varchar(100);

BEGIN
  IF P_Modo = 0 THEN
  	S_ID_PERSONA := 0;
  	S_SEXO := '1';
    S_COD_ASSINET := NULLIF(trim(both P_COD_ASSINET),'');

    
  	SELECT CASE WHEN P_SEXO=0 THEN 1  ELSE P_SEXO END  INTO STRICT S_SEXO;

	moises.iudp_Persona_Natural(0, P_NUM_DOCUMENTO, P_ID_TIPODOCUMENTO, P_NOMBRE, P_PATERNO, P_MATERNO, P_ID_ESTADOCIVIL, NULL, P_COD_PAIS, P_COD_PAIS, NULL, S_SEXO, P_FEC_NACIMIENTO, NULL, S_ID_PERSONA);
	--IUDP_PERSONA_NATURAL_EXTRA(0,S_ID_PERSONA,  P_EMAIL, P_FIJO, P_CELULAR);
	CALL moises.iudp_Persona_Virtual(0, S_ID_PERSONA, 0, 1, P_EMAIL, NULL);
    CALL moises.iudp_Persona_Telefono(0, S_ID_PERSONA, 0, 1, P_FIJO, 0, 0, NULL);
    CALL moises.iudp_Persona_Telefono(0, S_ID_PERSONA, 0, 5, P_CELULAR, 0, 0, NULL);
    CALL moises.iudp_Persona_Telefono(0, S_ID_PERSONA, 0, 9, P_RESIDENCIA, 0, 0, NULL);
	CALL moises.iudp_Persona_Documento(0, S_ID_PERSONA, 97, P_NUM_SNP);
	CALL moises.iudp_Persona_Documento(0, S_ID_PERSONA, 98, P_NUM_CUSPP);
	IF S_COD_ASSINET IS NOT NULL THEN
    	UPDATE moises.Persona_Natural SET
        	CODIGO_ASSINET= S_COD_ASSINET
      	WHERE ID_PERSONA = S_ID_PERSONA;
    END IF;
	eliseo.iudp_Empleado(0, P_ID_ENTIDAD, S_ID_PERSONA, P_ID_CONTRATO, P_ID_REGIMENLABORAL, P_ES_DISCAPACITADO, P_FEC_INICIOAFP, P_FEC_INICIOONP, P_ID_CATEGORIAOCUPACIONAL, P_ID_TIPOCONTRATO, P_ID_TIPOPAGO, P_ID_PAGOPERIODO, P_ID_TIPOJORNADA, P_ID_REGIMENSALUD, P_ID_TIPOCESE, P_COD_EPS, P_COD_APS, P_COD_ASISTENCIA, P_FEC_INICIO, P_FEC_TERMINO, P_FEC_ENTIDAD, P_FEC_MISIONERO,P_ENTIDADDEPTO, P_LICENCIA_ACTIVO_CODE);

  END IF;
END;
$body$
LANGUAGE PLPGSQL
;
-- REVOKE ALL ON PROCEDURE moises.iudp_persona_datos_multiples ( P_Modo integer, P_NUM_DOCUMENTO text, P_ID_TIPODOCUMENTO integer, P_NOMBRE text, P_PATERNO text, P_MATERNO text, P_ID_ESTADOCIVIL integer, P_COD_PAIS integer, P_SEXO text, P_FEC_NACIMIENTO text, P_EMAIL text DEFAULT NULL, P_FIJO text DEFAULT NULL, P_CELULAR text DEFAULT NULL, P_RESIDENCIA text DEFAULT NULL, P_NUM_SNP text DEFAULT NULL, P_NUM_CUSPP text DEFAULT NULL, P_ID_ENTIDAD integer DEFAULT NULL, P_ID_CONTRATO integer DEFAULT NULL, P_ID_REGIMENLABORAL integer DEFAULT NULL, P_ES_DISCAPACITADO text DEFAULT NULL, P_FEC_INICIOAFP text DEFAULT NULL, P_FEC_INICIOONP text DEFAULT NULL, P_ID_CATEGORIAOCUPACIONAL integer DEFAULT NULL, P_ID_TIPOCONTRATO integer DEFAULT NULL, P_ID_TIPOPAGO integer DEFAULT NULL, P_ID_PAGOPERIODO integer DEFAULT NULL, P_ID_TIPOJORNADA integer DEFAULT NULL, P_ID_REGIMENSALUD integer DEFAULT NULL, P_ID_TIPOCESE integer DEFAULT NULL, P_COD_EPS text DEFAULT NULL, P_COD_APS text DEFAULT NULL, P_COD_ASISTENCIA integer DEFAULT NULL, P_FEC_INICIO text DEFAULT NULL, P_FEC_TERMINO text DEFAULT NULL, P_FEC_ENTIDAD text DEFAULT NULL, P_FEC_MISIONERO text DEFAULT NULL,P_ENTIDADDEPTO text DEFAULT NULL,P_LICENCIA_ACTIVO_CODE text DEFAULT NULL, P_COD_ASSINET text DEFAULT null) FROM PUBLIC;

